{"ast":null,"code":"var _jsxFileName = \"C:\\\\estoque\\\\frontend\\\\src\\\\pages\\\\Login\\\\index.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useContext } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { Context } from '../../Context/AuthContext';\nimport { Container, Form } from './styles';\nimport { Logo } from './styles';\nimport fbtcLogo from \"../../img/Menu/logo.svg\";\nimport api from '../../config/configApi';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const Login = () => {\n  _s();\n\n  const history = useHistory();\n  const {\n    signIn\n  } = useContext(Context);\n  const [dadosUsuario, setUsuario] = useState({\n    usuario: '',\n    senha: ''\n  });\n  const [status, setStatus] = useState({\n    type: '',\n    messagem: ''\n  });\n\n  const valorInput = e => setUsuario({ ...dadosUsuario,\n    [e.target.name]: e.target.value\n  });\n\n  const loginSubmit = async e => {\n    e.preventDefault();\n    const headers = {\n      'Content-Type': 'application/json'\n    };\n    api.post(\"/login\", dadosUsuario, {\n      headers\n    }).then(response => {\n      if (response.data.erro) {\n        setStatus({\n          type: 'erro',\n          messagem: response.data.messagem\n        });\n      } else {\n        setStatus({\n          type: 'success',\n          messagem: response.data.messagem\n        }); // Salvar o token localStorage\n\n        localStorage.setItem('token', JSON.stringify(response.data.token));\n        api.defaults.headers.Authorization = `Bearer ${response.data.token}`;\n        signIn(true);\n        return history.push('/dashboard');\n      }\n    }).catch(() => {\n      setStatus({\n        type: 'erro',\n        messagem: \"Erro: Usu치rio ou senha a senha incorreta!\"\n      });\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: [status.type === 'erro' ? /*#__PURE__*/_jsxDEV(\"p\", {\n      children: status.messagem\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 39\n    }, this) : \"\", status.type === 'success' ? /*#__PURE__*/_jsxDEV(\"p\", {\n      children: status.messagem\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 42\n    }, this) : \"\", /*#__PURE__*/_jsxDEV(Form, {\n      onSubmit: loginSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Usu\\xE1rio: \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"usuario\",\n        placeholder: \"Digite o usu\\xE1rio\",\n        onChange: valorInput\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 106\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 112\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        children: \"Senha: \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"password\",\n        name: \"senha\",\n        placeholder: \"Digite a senha\",\n        autoComplete: \"on\",\n        onChange: valorInput\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 124\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 130\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"Acessar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Login, \"wL5r83V/Rx4ZGzNeDaNFflf6B3A=\", false, function () {\n  return [useHistory];\n});\n\n_c = Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["C:/estoque/frontend/src/pages/Login/index.js"],"names":["React","useState","useContext","useHistory","Context","Container","Form","Logo","api","Login","history","signIn","dadosUsuario","setUsuario","usuario","senha","status","setStatus","type","messagem","valorInput","e","target","name","value","loginSubmit","preventDefault","headers","post","then","response","data","erro","localStorage","setItem","JSON","stringify","token","defaults","Authorization","push","catch"],"mappings":"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","sourcesContent":["import React, { useState, useContext } from 'react';import { useHistory } from 'react-router-dom';\r\nimport { Context } from '../../Context/AuthContext';\r\nimport { Container, Form } from './styles';\r\nimport { Logo } from './styles';\r\nimport fbtcLogo from '../../img/Menu/logo.svg';\r\n\r\nimport api from '../../config/configApi';\r\n\r\nexport const Login = () => {\r\n\r\n    const history = useHistory();\r\n\r\n    const {signIn} = useContext(Context);\r\n    \r\n\r\n    const [dadosUsuario, setUsuario] = useState({\r\n        usuario: '',\r\n        senha: ''\r\n    });\r\n\r\n    const [status, setStatus] = useState({\r\n        type: '',\r\n        messagem: ''\r\n    });\r\n\r\n    const valorInput = e => setUsuario({ ...dadosUsuario, [e.target.name]: e.target.value });\r\n\r\n    const loginSubmit = async e => {\r\n        e.preventDefault();\r\n\r\n        const headers = {\r\n            'Content-Type': 'application/json'\r\n        };\r\n\r\n        api.post(\"/login\", dadosUsuario, { headers })\r\n            .then((response) => {\r\n                if (response.data.erro) {\r\n                    setStatus({\r\n                        type: 'erro',\r\n                        messagem: response.data.messagem\r\n                    });\r\n                } else {\r\n                    setStatus({\r\n                        type: 'success',\r\n                        messagem: response.data.messagem\r\n                    });\r\n                    // Salvar o token localStorage\r\n                    localStorage.setItem('token', JSON.stringify(response.data.token));\r\n                    api.defaults.headers.Authorization = `Bearer ${response.data.token}`;\r\n                    signIn(true);\r\n                    return history.push('/dashboard');\r\n                }\r\n            }).catch(() => {\r\n                setStatus({\r\n                    type: 'erro',\r\n                    messagem: \"Erro: Usu치rio ou senha a senha incorreta!\"\r\n                });\r\n            });\r\n    }\r\n\r\n    return (\r\n        <Container>                        \r\n            {status.type === 'erro' ? <p>{status.messagem}</p> : \"\"}\r\n            {status.type === 'success' ? <p>{status.messagem}</p> : \"\"}\r\n            \r\n            <Form onSubmit={loginSubmit}>\r\n                 \r\n                <label>Usu치rio: </label>\r\n                <input type=\"text\" name=\"usuario\" placeholder=\"Digite o usu치rio\" onChange={valorInput} /><br /><br />\r\n\r\n                <label>Senha: </label>\r\n                <input type=\"password\" name=\"senha\" placeholder=\"Digite a senha\" autoComplete=\"on\" onChange={valorInput} /><br /><br />\r\n\r\n                <button type=\"submit\">Acessar</button>\r\n\r\n            </Form>\r\n        </Container>\r\n    );\r\n}"]},"metadata":{},"sourceType":"module"}